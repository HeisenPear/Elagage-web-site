---
/**
 * Page Zones d'intervention - Optimis√©e mobile-first pour SEO local
 */
import BaseLayout from '@/layouts/BaseLayout.astro';
import { siteConfig } from '@/data/siteConfig';
import { getLocalBusinessSchema } from '@/utils/schemas';

// SEO optimis√© pour "√©lagueur pr√®s de chez moi"
const pageTitle = `√âlagueur pr√®s de chez moi ${siteConfig.serviceArea.department} | Zones d'intervention`;
const pageDescription = `Trouvez votre √©lagueur local en ${siteConfig.serviceArea.department}. ${siteConfig.business.name} intervient dans 20+ villes : ${siteConfig.serviceArea.cities.slice(0, 5).join(', ')}... Devis gratuit 24h.`;
const keywords = [
  '√©lagueur pr√®s de chez moi',
  `√©lagueur ${siteConfig.serviceArea.mainCity}`,
  '√©lagueur local Indre-et-Loire',
  'zone intervention √©lagage 37',
  ...siteConfig.serviceArea.cities.map(city => `√©lagueur ${city}`)
];

// Schema.org pour les zones
const schema = getLocalBusinessSchema();
---

<BaseLayout
  title={pageTitle}
  description={pageDescription}
  keywords={keywords}
  schema={schema}
>
  <!-- Hero Section mobile-optimis√© -->
  <section class="pt-24 md:pt-32 pb-12 md:pb-20 bg-gradient-to-br from-primary to-primary-900 text-white">
    <div class="container-custom">
      <div class="max-w-4xl mx-auto text-center animate-on-scroll">
        <span class="inline-block px-4 py-2 bg-accent/20 text-accent font-semibold rounded-full text-xs md:text-sm uppercase tracking-wider mb-4">
          üå≥ √âlagueur de proximit√©
        </span>
        <h1 class="text-3xl md:text-5xl lg:text-6xl font-display font-bold mb-4 md:mb-6">
          √âlagueur pr√®s de chez vous en {siteConfig.serviceArea.department}
        </h1>
        <p class="text-base md:text-xl text-white/90 mb-6 md:mb-8">
          Intervention rapide dans {siteConfig.serviceArea.cities.length} villes ‚Ä¢ Rayon {siteConfig.serviceArea.radius} km autour de {siteConfig.serviceArea.mainCity}
        </p>

        <!-- CTA mobile-optimized -->
        <div class="flex flex-col sm:flex-row items-center justify-center gap-3 md:gap-4">
          <a href={`tel:${siteConfig.business.phone}`} class="w-full sm:w-auto btn-primary inline-flex text-base md:text-lg justify-center">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
            </svg>
            <span>Appeler : {siteConfig.business.phoneDisplay}</span>
          </a>
          <a href="#villes" class="w-full sm:w-auto inline-flex items-center justify-center gap-3 px-6 md:px-8 py-3 md:py-4 border-2 border-white text-white font-semibold rounded-lg hover:bg-white hover:text-primary transition-all text-base md:text-lg">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
            </svg>
            <span>Voir ma ville</span>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Section SEO intro "√©lagueur pr√®s de chez moi" -->
  <section class="py-12 md:py-20 bg-white">
    <div class="container-custom">
      <div class="max-w-4xl mx-auto animate-on-scroll">
        <div class="prose prose-lg max-w-none space-y-4 md:space-y-6 text-neutral-gray leading-relaxed">
          <h2 class="text-2xl md:text-3xl font-display font-bold text-primary mb-4 md:mb-6">
            Vous cherchez un √©lagueur pr√®s de chez vous en Indre-et-Loire ?
          </h2>

          <p class="text-base md:text-lg">
            <strong class="text-primary">{siteConfig.business.name}</strong> est votre <strong>√©lagueur local de confiance</strong> intervenant dans toute la r√©gion
            <strong>{siteConfig.serviceArea.department}</strong>. Avec <strong>{siteConfig.stats.yearsExperience} ans d'exp√©rience</strong> et des centaines de clients satisfaits,
            nous sommes l'un des √©lagueurs les plus reconnus de la r√©gion de {siteConfig.serviceArea.mainCity}.
          </p>

          <div class="grid sm:grid-cols-3 gap-4 my-6 md:my-8">
            <div class="bg-gradient-to-br from-accent/10 to-accent/5 rounded-xl p-4 md:p-6 text-center border border-accent/20">
              <div class="text-2xl md:text-3xl font-bold text-accent mb-1 md:mb-2">{siteConfig.serviceArea.cities.length}+</div>
              <div class="text-xs md:text-sm text-neutral-gray">Villes couvertes</div>
            </div>
            <div class="bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl p-4 md:p-6 text-center border border-primary/20">
              <div class="text-2xl md:text-3xl font-bold text-primary mb-1 md:mb-2">{siteConfig.serviceArea.radius} km</div>
              <div class="text-xs md:text-sm text-neutral-gray">Rayon d'action</div>
            </div>
            <div class="bg-gradient-to-br from-secondary/10 to-secondary/5 rounded-xl p-4 md:p-6 text-center border border-secondary/20">
              <div class="text-2xl md:text-3xl font-bold text-secondary mb-1 md:mb-2">-50%</div>
              <div class="text-xs md:text-sm text-neutral-gray">Cr√©dit d'imp√¥t</div>
            </div>
          </div>

          <p class="text-base md:text-lg">
            En tant qu'<strong>√©lagueur de proximit√©</strong>, nous intervenons rapidement (sous <strong>48h</strong>)
            pour tous vos travaux d'<strong>√©lagage</strong>, <strong>abattage</strong>, <strong>taille de haies</strong>
            et <strong>entretien d'espaces verts</strong>. Notre entreprise familiale est <strong>assur√©e RC Pro 8M‚Ç¨</strong>
            et tous nos √©lagueurs sont certifi√©s professionnels.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Section Liste des villes (Grid mobile-optimis√©e) -->
  <section id="villes" class="py-12 md:py-20 bg-gradient-to-br from-neutral-cream to-white">
    <div class="container-custom">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-8 md:mb-12 animate-on-scroll">
          <h2 class="text-2xl md:text-4xl font-display font-bold text-primary mb-3 md:mb-4">
            S√©lectionnez votre ville
          </h2>
          <p class="text-sm md:text-lg text-neutral-gray">
            Cliquez sur votre ville pour voir nos services et obtenir un devis gratuit
          </p>
        </div>

        <!-- Grille responsive des villes avec liens -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-4 mb-8 md:mb-12 animate-on-scroll">
          {siteConfig.serviceArea.cities.map((city) => {
            const citySlug = city.toLowerCase().replace(/[^a-z0-9]+/g, '-');
            return (
              <a
                href={`/zones/${citySlug}`}
                class="group bg-white rounded-xl p-4 md:p-6 shadow-soft hover:shadow-lift transition-all duration-300 hover:scale-105 hover:bg-accent/5 border border-transparent hover:border-accent/30"
              >
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 md:w-12 md:h-12 bg-accent/10 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-accent transition-colors">
                    <svg class="w-5 h-5 md:w-6 md:h-6 text-accent group-hover:text-white transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                  </div>
                  <div class="flex-1">
                    <div class="font-bold text-primary group-hover:text-accent transition-colors text-sm md:text-base">
                      {city}
                    </div>
                    <div class="text-xs text-neutral-gray">
                      Voir nos services ‚Üí
                    </div>
                  </div>
                </div>
              </a>
            );
          })}
        </div>

        <!-- CTA si ville non list√©e -->
        <div class="max-w-2xl mx-auto animate-on-scroll">
          <div class="bg-gradient-to-br from-accent/10 to-primary/10 rounded-2xl p-6 md:p-8 border border-accent/20 text-center">
            <div class="w-14 h-14 md:w-16 md:h-16 bg-accent rounded-full flex items-center justify-center mx-auto mb-4">
              <svg class="w-7 h-7 md:w-8 md:h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
            </div>
            <h3 class="text-lg md:text-xl font-bold text-primary mb-2 md:mb-3">
              Votre ville n'est pas dans la liste ?
            </h3>
            <p class="text-sm md:text-base text-neutral-gray mb-4 md:mb-6">
              Nous intervenons √©galement dans d'autres communes du {siteConfig.serviceArea.department} selon la demande.
              <strong>Contactez-nous pour v√©rifier</strong> si nous pouvons intervenir chez vous !
            </p>
            <div class="flex flex-col sm:flex-row items-center justify-center gap-3">
              <a href={`tel:${siteConfig.business.phone}`} class="w-full sm:w-auto btn-primary inline-flex justify-center">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                </svg>
                <span>Appeler maintenant</span>
              </a>
              <a href="/contact" class="w-full sm:w-auto inline-flex items-center justify-center gap-3 px-6 py-3 border-2 border-primary text-primary font-semibold rounded-lg hover:bg-primary hover:text-white transition-all">
                <span>Devis en ligne</span>
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section Carte Google Maps -->
  <section class="py-12 md:py-20 bg-white">
    <div class="container-custom">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-8 md:mb-12 animate-on-scroll">
          <h2 class="text-2xl md:text-4xl font-display font-bold text-primary mb-3 md:mb-4">
            Notre zone de couverture
          </h2>
          <p class="text-sm md:text-lg text-neutral-gray">
            {siteConfig.serviceArea.radius} km autour de {siteConfig.serviceArea.mainCity} ‚Ä¢ Intervention dans toute l'{siteConfig.serviceArea.department}
          </p>
        </div>

        <!-- Google Maps Embed (√† remplacer par vraie iframe) -->
        <div class="animate-on-scroll">
          <div class="aspect-video md:aspect-[21/9] bg-gradient-to-br from-primary/10 to-accent/10 rounded-2xl shadow-lift overflow-hidden">
            <iframe
              src={`https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d84549.89469107384!2d${siteConfig.business.coordinates.lng}!3d${siteConfig.business.coordinates.lat}!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47fcd4fde792d591%3A0xa97fa01ba0a2d1db!2sJou%C3%A9-l%C3%A8s-Tours!5e0!3m2!1sfr!2sfr!4v1234567890123!5m2!1sfr!2sfr`}
              width="100%"
              height="100%"
              style="border:0;"
              allowfullscreen=""
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              title={`Carte des zones d'intervention de ${siteConfig.business.name}`}
            ></iframe>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA t√©l√©phone sticky mobile (visible uniquement sur mobile) -->
  <div class="fixed bottom-0 left-0 right-0 z-50 lg:hidden bg-gradient-to-r from-accent to-accent/90 shadow-2xl border-t-4 border-white/20 backdrop-blur-sm">
    <a
      href={`tel:${siteConfig.business.phone}`}
      class="flex items-center justify-center gap-3 px-6 py-4 text-white font-bold text-lg"
    >
      <svg class="w-6 h-6 animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
      </svg>
      <span>Appeler : {siteConfig.business.phoneDisplay}</span>
    </a>
  </div>
</BaseLayout>
