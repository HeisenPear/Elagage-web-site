---
/**
 * Page d'accueil - Refonte SEO & Conversion
 * Objectif : rank #1 "élagage tours" + maximiser les appels
 */
import BaseLayout from '@/layouts/BaseLayout.astro';
import HeroSection from '@/components/sections/HeroSection.astro';
import ContactForm from '@/components/react/ContactForm';
import StatsCounter from '@/components/react/StatsCounter';
import { siteConfig, getPhoneLink } from '@/data/siteConfig';
import {
  getLocalBusinessSchema,
  getOrganizationSchema,
  getFAQSchema,
  getWebSiteSchema,
  combineSchemas,
} from '@/utils/schemas';

const schemas = combineSchemas(
  getOrganizationSchema(),
  getLocalBusinessSchema(),
  getWebSiteSchema(),
  getFAQSchema()
);

const stats = [
  { value: siteConfig.stats.treesPerYear, label: 'arbres élagués/an', suffix: '+' },
  { value: siteConfig.stats.yearsExperience, label: "ans d'expérience" },
  { value: siteConfig.stats.satisfactionRate, label: 'clients satisfaits', suffix: '%' },
  { value: 127, label: 'avis Google' },
];

// Services data (static pour SEO optimal - pas de React island)
const services = [
  {
    slug: 'elagage',
    icon: `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/></svg>`,
    title: "Élagage d'arbres",
    subtitle: "Élagage raisonné & sanitaire",
    description: "Taille professionnelle pour la santé et la sécurité de vos arbres. Élagueur grimpeur certifié, respect de la biologie de l'arbre.",
    features: ["Élagage raisonné et sanitaire", "Tous types d'arbres (ombrage, fruitiers)", "Élagueur certifié et assuré", "Réduction fiscale -50%"],
    color: "from-primary to-primary-600",
  },
  {
    slug: 'abattage',
    icon: `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"/></svg>`,
    title: "Abattage d'arbres",
    subtitle: "Sécurisé & professionnel",
    description: "Abattage sécurisé d'arbres dangereux ou gênants. Techniques de démontage adaptées à votre terrain, même en zone contrainte.",
    features: ["Démontage par rétention", "Évacuation totale des végétaux", "Assurance RC Pro 8M€", "Intervention 7j/7"],
    color: "from-amber-600 to-amber-500",
  },
  {
    slug: 'taille-haies',
    icon: `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>`,
    title: "Taille de haies",
    subtitle: "Précis & esthétique",
    description: "Taille et entretien de haies toutes hauteurs. Thuyas, lauriers, troènes, buis — résultat soigné et durable.",
    features: ["Toutes hauteurs et essences", "Taille précise et esthétique", "Ramassage des déchets inclus", "Paiement en plusieurs fois"],
    color: "from-lime-600 to-lime-500",
  },
  {
    slug: 'dessouchage',
    icon: `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>`,
    title: "Dessouchage",
    subtitle: "Rogneuse professionnelle",
    description: "Élimination complète des souches avec rogneuse professionnelle. Terrain remis en état, prêt pour un nouvel aménagement.",
    features: ["Dessouchage mécanique", "Évacuation des déchets", "Remise en état du terrain", "Devis gratuit sous 24h"],
    color: "from-orange-600 to-orange-500",
  },
  {
    slug: 'entretien-espaces-verts',
    icon: `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>`,
    title: "Entretien espaces verts",
    subtitle: "Contrats annuels disponibles",
    description: "Entretien complet de vos espaces verts : tonte, taille d'arbustes, débroussaillage. Contrats annuels pour particuliers et professionnels.",
    features: ["Tonte et scarification", "Taille arbustes et massifs", "Débroussaillage", "Contrats annuels pro"],
    color: "from-teal-600 to-teal-500",
  },
  {
    slug: 'elagage-fruitiers',
    icon: `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/></svg>`,
    title: "Élagage arbres fruitiers",
    subtitle: "Optimiser la production",
    description: "Taille spécialisée d'arbres fruitiers (pommiers, poiriers, cerisiers, pruniers) pour optimiser la production et la santé de vos arbres.",
    features: ["Taille de fructification", "Pommiers, poiriers, cerisiers", "Diagnostic phytosanitaire", "Meilleure récolte garantie"],
    color: "from-rose-600 to-rose-500",
  },
];
---

<BaseLayout
  title={siteConfig.seo.title}
  description={siteConfig.seo.description}
  keywords={siteConfig.seo.keywords}
  schema={schemas}
>

  <!-- ============================================ -->
  <!-- 1. HERO - Téléphone comme CTA #1             -->
  <!-- ============================================ -->
  <HeroSection />

  <!-- ============================================ -->
  <!-- 2. BARRE TÉLÉPHONE URGENCE (mobile-first)    -->
  <!-- ============================================ -->
  <div class="bg-accent text-white py-3 px-4 text-center">
    <a href={getPhoneLink()} class="inline-flex items-center justify-center gap-2 sm:gap-3 font-bold text-sm sm:text-base md:text-lg hover:text-white/90 transition-colors w-full">
      <svg class="w-4 h-4 sm:w-5 sm:h-5 animate-pulse flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
      </svg>
      <span class="sm:hidden">Urgence ? {siteConfig.business.phoneDisplay}</span>
      <span class="hidden sm:inline">Urgence arbre dangereux ? Appelez le {siteConfig.business.phoneDisplay} — Intervention 7j/7</span>
    </a>
  </div>

  <!-- ============================================ -->
  <!-- 3. CONTACT FORM (juste après hero)           -->
  <!-- ============================================ -->
  <section id="contact" class="py-16 md:py-20 bg-gradient-to-br from-neutral-cream to-white">
    <div class="container-custom">
      <div class="max-w-4xl mx-auto">
        <div class="text-center mb-10 animate-on-scroll">
          <span class="inline-block px-4 py-1.5 bg-accent/10 text-accent font-semibold rounded-full text-sm uppercase tracking-wider mb-4">
            Devis gratuit
          </span>
          <h2 class="text-3xl md:text-4xl font-display font-bold text-primary mb-4">
            Obtenez votre devis en 24h
          </h2>
          <div class="flex flex-wrap items-center justify-center gap-2 md:gap-4 text-sm font-semibold">
            <span class="flex items-center gap-1.5 text-accent">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              Déplacement gratuit
            </span>
            <span class="text-neutral-gray/30 hidden sm:inline">|</span>
            <span class="flex items-center gap-1.5 text-primary">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              Réponse sous 24h
            </span>
            <span class="text-neutral-gray/30 hidden sm:inline">|</span>
            <span class="flex items-center gap-1.5 text-secondary">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
              Sans engagement
            </span>
          </div>
        </div>

        <div class="bg-white rounded-2xl shadow-lift p-6 md:p-10 animate-on-scroll">
          <ContactForm client:idle />
        </div>

        <!-- Alternative : appel direct -->
        <div class="text-center mt-6">
          <p class="text-neutral-gray text-sm mb-2">Ou appelez-nous directement :</p>
          <a href={getPhoneLink()} class="inline-flex items-center gap-2 text-primary font-bold text-xl md:text-2xl hover:text-accent transition-colors">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
            </svg>
            {siteConfig.business.phoneDisplay}
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================================ -->
  <!-- 4. CHIFFRES CLÉS                            -->
  <!-- ============================================ -->
  <section class="py-12 bg-gradient-to-br from-primary-800 to-primary text-white">
    <div class="container-custom">
      <StatsCounter client:idle stats={stats} />
    </div>
  </section>

  <!-- ============================================ -->
  <!-- 5. SERVICES - Grille statique SEO-optimisée -->
  <!-- ============================================ -->
  <section id="services" class="py-16 md:py-24 bg-neutral-cream">
    <div class="container-custom">
      <div class="text-center max-w-3xl mx-auto mb-12 md:mb-16 animate-on-scroll">
        <span class="inline-block px-4 py-1.5 bg-accent/10 text-accent font-semibold rounded-full text-sm uppercase tracking-wider mb-4">
          Nos prestations
        </span>
        <h2 class="text-3xl md:text-5xl font-display font-bold text-primary mb-4">
          Élagage et entretien d'arbres à Tours (37)
        </h2>
        <p class="text-lg text-neutral-gray">
          Élagueurs grimpeurs certifiés, tous vos travaux réalisés avec soin et sécurité.
        </p>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 md:gap-6">
        {services.map((service) => (
          <article class="service-card group bg-white rounded-2xl overflow-hidden shadow-soft hover:shadow-lift transition-all duration-300 hover:-translate-y-1 border border-transparent hover:border-accent/20">
            <!-- Bandeau coloré en haut -->
            <div class={`h-1.5 w-full bg-gradient-to-r ${service.color}`}></div>

            <div class="p-6 md:p-7">
              <!-- Icône + titre -->
              <div class="flex items-start gap-4 mb-4">
                <div class="w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center flex-shrink-0 text-primary group-hover:bg-accent/10 group-hover:text-accent transition-all duration-300">
                  <Fragment set:html={service.icon} />
                </div>
                <div>
                  <h3 class="text-lg md:text-xl font-display font-bold text-primary leading-tight">
                    {service.title}
                  </h3>
                  <span class="text-xs font-semibold text-accent uppercase tracking-wide">
                    {service.subtitle}
                  </span>
                </div>
              </div>

              <!-- Description -->
              <p class="text-neutral-gray text-sm md:text-base leading-relaxed mb-5">
                {service.description}
              </p>

              <!-- Features -->
              <ul class="space-y-2 mb-6">
                {service.features.map((feature) => (
                  <li class="flex items-center gap-2 text-sm text-neutral-gray">
                    <svg class="w-4 h-4 text-accent flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                    {feature}
                  </li>
                ))}
              </ul>

              <!-- CTA -->
              <a
                href="/contact"
                class="inline-flex items-center gap-2 w-full justify-center px-4 py-3 bg-primary/5 hover:bg-accent text-primary hover:text-white font-semibold text-sm rounded-xl transition-all duration-300 border border-primary/10 hover:border-accent"
              >
                Demander un devis gratuit
                <svg class="w-4 h-4 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                </svg>
              </a>
            </div>
          </article>
        ))}
      </div>

      <!-- CTA global -->
      <div class="text-center mt-10 animate-on-scroll px-4">
        <a href={getPhoneLink()} class="inline-flex items-center justify-center gap-3 w-full sm:w-auto px-6 sm:px-8 py-4 bg-accent hover:bg-accent-hover text-white font-bold text-base sm:text-lg rounded-xl transition-all duration-300 hover:scale-105 shadow-lg">
          <svg class="w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
          </svg>
          <span class="sm:hidden">Appeler — {siteConfig.business.phoneDisplay}</span>
          <span class="hidden sm:inline">Appeler pour un devis — {siteConfig.business.phoneDisplay}</span>
        </a>
      </div>
    </div>
  </section>

  <!-- ============================================ -->
  <!-- 6. QUI SOMMES-NOUS (photo Rudy + confiance) -->
  <!-- ============================================ -->
  <section class="py-16 md:py-24 bg-white">
    <div class="container-custom">
      <div class="grid lg:grid-cols-2 gap-8 lg:gap-16 items-center">

        <!-- Photo + badges de confiance -->
        <div class="relative animate-on-scroll order-2 lg:order-1">
          <!-- Photo de Rudy -->
          <div class="relative rounded-2xl overflow-hidden shadow-lift">
            <img
              src="/images/hero/Élagueur.jpeg"
              alt="Rudy Cappello - Élagueur grimpeur professionnel certifié à Tours (37)"
              class="w-full h-[260px] sm:h-[360px] md:h-[480px] object-cover object-top"
              loading="lazy"
              width="600"
              height="500"
            />
            <!-- Badge sur la photo -->
            <div class="absolute bottom-5 left-5 right-5 bg-white/95 backdrop-blur-sm rounded-xl p-4 shadow-lg">
              <div class="flex items-center gap-3">
                <div class="w-12 h-12 bg-accent rounded-full flex items-center justify-center flex-shrink-0">
                  <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                </div>
                <div>
                  <div class="font-bold text-primary">Rudy Cappello</div>
                  <div class="text-sm text-neutral-gray">Élagueur grimpeur certifié · 10+ ans d'expérience</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Badges partenaires -->
          <div class="mt-4 grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3">
            {[
              { src: "/images/services/Logo Stihl.webp", alt: "Matériel Stihl" },
              { src: "/images/services/Logo Hinowa.png.webp", alt: "Matériel Hinowa" },
              { src: "/images/services/Logo bannière assurance Allianz (1).webp", alt: "Assuré Allianz" },
              { src: "/images/badges/credit-impot.webp", alt: "Crédit d'impôt" },
            ].map(badge => (
              <div class="bg-white rounded-xl p-2 sm:p-3 shadow-soft flex items-center justify-center h-14 sm:h-16">
                <img src={badge.src} alt={badge.alt} class="h-8 sm:h-10 w-auto object-contain" loading="lazy"/>
              </div>
            ))}
          </div>
        </div>

        <!-- Texte -->
        <div class="space-y-6 animate-on-scroll order-1 lg:order-2">
          <span class="inline-block px-4 py-1.5 bg-accent/10 text-accent font-semibold rounded-full text-sm uppercase tracking-wider">
            Pourquoi nous choisir
          </span>
          <h2 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-display font-bold text-primary leading-tight">
            Votre élagueur de confiance en Indre-et-Loire
          </h2>
          <p class="text-base sm:text-lg text-neutral-gray leading-relaxed">
            Depuis <strong>{siteConfig.stats.yearsExperience} ans</strong>, <strong>Élagage Abattage 37</strong> est l'entreprise familiale de référence pour l'élagage et l'entretien d'arbres à Tours et dans toute l'Indre-et-Loire. Des centaines de clients particuliers et professionnels font confiance à notre équipe de grimpeurs certifiés.
          </p>

          <div class="space-y-4">
            {[
              {
                title: 'Élagueur grimpeur certifié',
                desc: 'Formation CS Arboriste-Élagueur + 13 ans d\'expérience en travaux d\'élagage et d\'abattage en hauteur.',
                badge: 'CERTIFIÉ',
                badgeColor: 'bg-blue-100 text-blue-700',
              },
              {
                title: 'Assurance RC Pro 8 000 000€',
                desc: 'Tous vos chantiers couverts. Devis et attestation d\'assurance fournis avant intervention.',
                badge: 'ASSURÉ',
                badgeColor: 'bg-green-100 text-green-700',
              },
              {
                title: 'Crédit d\'impôt jusqu\'à 2 500€',
                desc: '50% de réduction fiscale sur vos travaux d\'élagage (plafond 5 000€/an). Attestation fiscale fournie.',
                badge: '-50%',
                badgeColor: 'bg-orange-100 text-orange-700',
              },
              {
                title: 'Intervention rapide <48h',
                desc: 'Disponibilité 7j/7, même les week-ends et jours fériés pour les urgences.',
                badge: 'RAPIDE',
                badgeColor: 'bg-accent/10 text-accent',
              },
            ].map((point) => (
              <div class="flex gap-4 group">
                <div class="flex-shrink-0 w-11 h-11 bg-accent/10 rounded-xl flex items-center justify-center group-hover:bg-accent transition-colors duration-300">
                  <svg class="w-5 h-5 text-accent group-hover:text-white transition-colors duration-300" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                </div>
                <div class="flex-1">
                  <div class="flex items-center gap-2 mb-1">
                    <h3 class="font-bold text-primary text-base">{point.title}</h3>
                    <span class={`px-2 py-0.5 rounded text-xs font-bold uppercase tracking-wider ${point.badgeColor}`}>
                      {point.badge}
                    </span>
                  </div>
                  <p class="text-sm text-neutral-gray">{point.desc}</p>
                </div>
              </div>
            ))}
          </div>

          <div class="flex flex-col sm:flex-row gap-3 pt-2">
            <a href={getPhoneLink()} class="btn-primary inline-flex text-base">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
              Appeler maintenant
            </a>
            <a href="/contact" class="inline-flex items-center justify-center gap-2 px-6 py-3 border-2 border-primary text-primary font-bold rounded-xl hover:bg-primary hover:text-white transition-all duration-300 text-base">
              Devis gratuit
            </a>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- ============================================ -->
  <!-- 7. AVIS CLIENTS (Social Proof)              -->
  <!-- ============================================ -->
  <section class="py-16 md:py-20 bg-primary text-white relative overflow-hidden">
    <div class="absolute bottom-0 left-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl" aria-hidden="true"></div>
    <div class="container-custom relative z-10">
      <div class="text-center mb-10 animate-on-scroll">
        <span class="inline-block px-4 py-1.5 bg-accent/20 text-accent font-semibold rounded-full text-sm uppercase tracking-wider mb-4">
          Avis clients
        </span>
        <h2 class="text-3xl md:text-4xl font-display font-bold mb-2">
          Ce que disent nos clients
        </h2>
        <div class="flex items-center justify-center gap-2">
          <div class="flex text-yellow-400 text-xl">★★★★★</div>
          <span class="text-white/80 font-semibold">4.9/5 sur Google · 127 avis</span>
        </div>
      </div>

      <div class="grid md:grid-cols-3 gap-5 md:gap-6">
        {siteConfig.testimonials.map((t) => (
          <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/10 hover:bg-white/15 transition-all duration-300 animate-on-scroll">
            <!-- Étoiles -->
            <div class="flex text-yellow-400 text-lg mb-3" aria-label="5 étoiles">
              {'★'.repeat(t.rating)}
            </div>
            <!-- Texte -->
            <blockquote class="text-white/90 text-sm md:text-base leading-relaxed mb-4 italic">
              "{t.text}"
            </blockquote>
            <!-- Auteur -->
            <div class="flex items-center justify-between">
              <div>
                <div class="font-bold text-white">{t.name}</div>
                <div class="text-white/60 text-sm">{t.city}</div>
              </div>
              <div class="flex items-center gap-1 text-white/50 text-xs">
                <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12.545 10.239v3.821h5.445c-.712 2.315-2.647 3.972-5.445 3.972a6.033 6.033 0 110-12.064c1.498 0 2.866.549 3.921 1.453l2.814-2.814A9.969 9.969 0 0012.545 2C7.021 2 2.543 6.477 2.543 12s4.478 10 10.002 10c8.396 0 10.249-7.85 9.426-11.748l-9.426-.013z"/>
                </svg>
                Google
              </div>
            </div>
          </div>
        ))}
      </div>

      <!-- Lien Google Maps pour plus d'avis -->
      <div class="text-center mt-8 animate-on-scroll">
        <p class="text-white/70 text-sm">
          Plus de 127 avis · Note moyenne <strong class="text-accent">4.9/5</strong> sur Google
        </p>
      </div>
    </div>
  </section>

  <!-- ============================================ -->
  <!-- 8. ZONES D'INTERVENTION (SEO Local)          -->
  <!-- ============================================ -->
  <section class="py-16 md:py-20 bg-white">
    <div class="container-custom">
      <div class="max-w-5xl mx-auto">
        <div class="text-center mb-10 animate-on-scroll">
          <span class="inline-block px-4 py-1.5 bg-accent/10 text-accent font-semibold rounded-full text-sm uppercase tracking-wider mb-4">
            Zones d'intervention
          </span>
          <h2 class="text-3xl md:text-4xl font-display font-bold text-primary mb-4">
            Élagueur dans {siteConfig.serviceArea.cities.length} communes d'Indre-et-Loire
          </h2>
          <p class="text-lg text-neutral-gray">
            Intervention rapide dans un rayon de {siteConfig.serviceArea.radius}km autour de Tours · Devis gratuit sous 24h
          </p>
        </div>

        <!-- Stats zones -->
        <div class="grid grid-cols-3 gap-2 sm:gap-4 max-w-2xl mx-auto mb-10 animate-on-scroll">
          <div class="bg-neutral-cream rounded-xl p-3 sm:p-4 text-center border-2 border-accent/20">
            <div class="text-xl sm:text-3xl font-bold text-accent">{siteConfig.serviceArea.cities.length}</div>
            <div class="text-[10px] sm:text-xs text-neutral-gray font-medium mt-1">Villes desservies</div>
          </div>
          <div class="bg-neutral-cream rounded-xl p-3 sm:p-4 text-center border-2 border-primary/20">
            <div class="text-xl sm:text-3xl font-bold text-primary">{siteConfig.serviceArea.radius}km</div>
            <div class="text-[10px] sm:text-xs text-neutral-gray font-medium mt-1">Rayon d'action</div>
          </div>
          <div class="bg-neutral-cream rounded-xl p-3 sm:p-4 text-center border-2 border-accent/20">
            <div class="text-xl sm:text-3xl font-bold text-accent">24h</div>
            <div class="text-[10px] sm:text-xs text-neutral-gray font-medium mt-1">Délai de réponse</div>
          </div>
        </div>

        <!-- Liste des villes - SEO rich -->
        <div class="animate-on-scroll">
          <h3 class="text-lg font-bold text-primary mb-4 flex items-center gap-2">
            <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
            </svg>
            Communes desservies en Indre-et-Loire (37)
          </h3>
          <div class="flex flex-wrap gap-2">
            {siteConfig.serviceArea.cities.map((city, index) => (
              <span class={`inline-flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-all ${index === 0 ? 'bg-accent text-white shadow-sm' : 'bg-neutral-cream text-primary hover:bg-accent/10 border border-neutral-200'}`}>
                <svg class="w-3 h-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                </svg>
                {city}
                {index === 0 && <span class="text-xs font-bold">(principal)</span>}
              </span>
            ))}
          </div>
          <p class="text-sm text-neutral-gray mt-4">
            Votre commune n'apparaît pas ? Nous intervenons dans tout le département 37. <a href={getPhoneLink()} class="text-accent font-semibold hover:underline">Appelez-nous</a> pour vérifier notre disponibilité.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================================ -->
  <!-- 9. CONTENU SEO ENRICHI (élagage tours)       -->
  <!-- ============================================ -->
  <section class="py-16 md:py-20 bg-neutral-cream/60">
    <div class="container-custom">
      <div class="max-w-4xl mx-auto">

        <!-- Bloc principal Tours -->
        <div class="bg-gradient-to-br from-accent/10 to-primary/5 rounded-2xl border-l-4 border-accent p-6 md:p-8 mb-10 animate-on-scroll">
          <h2 class="text-2xl md:text-3xl font-display font-bold text-primary mb-4">
            Élagage Tours (37) : Expert Local depuis {siteConfig.stats.yearsExperience} ans
          </h2>
          <p class="text-base text-neutral-gray leading-relaxed mb-4">
            Vous cherchez un <strong>élagueur professionnel à Tours</strong> ? <strong>Élagage Abattage 37</strong> est votre référence pour tous vos travaux d'<strong>élagage à Tours</strong> et ses environs.
            Basés en Indre-et-Loire, nous sommes l'<strong>entreprise d'élagage de proximité</strong> qui intervient <strong>7j/7 en urgence</strong> dans toute l'agglomération tourangelle :
            <strong>Tours centre</strong>, <strong>Tours Nord</strong>, <strong>Tours Sud</strong>, <strong>Joué-lès-Tours</strong>, <strong>Saint-Cyr-sur-Loire</strong>, <strong>La Riche</strong>, <strong>Saint-Avertin</strong> et <strong>Chambray-lès-Tours</strong>.
          </p>
          <p class="text-base text-neutral-gray leading-relaxed">
            Notre expertise en <strong>élagage d'arbres à Tours</strong> couvre toutes les prestations : <strong>élagage ornemental</strong>,
            <strong>abattage d'arbres dangereux</strong>, <strong>taille sanitaire</strong>, <strong>haubanage</strong>, <strong>dessouchage</strong>
            et <strong>soins phytosanitaires</strong>.
          </p>
        </div>

        <!-- Grille informations -->
        <div class="grid md:grid-cols-2 gap-6 text-sm text-neutral-gray leading-relaxed animate-on-scroll">
          <div class="bg-white rounded-xl p-6 shadow-soft">
            <h3 class="text-lg font-bold text-primary mb-3 flex items-center gap-2">
              <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              Pourquoi choisir notre entreprise ?
            </h3>
            <p class="mb-3">
              <strong>Élagage Abattage 37</strong> est reconnu comme l'un des meilleurs <strong>élagueurs de Tours (37)</strong>.
              Notre équipe maîtrise toutes les techniques : <strong>taille douce</strong>, <strong>élagage raisonné</strong>, <strong>abattage directionnel</strong>.
            </p>
            <p>
              Nous disposons d'une <strong>assurance RC Pro de 8M€</strong> et respectons scrupuleusement le <strong>PLU de Tours</strong> et les arrêtés municipaux.
            </p>
          </div>

          <div class="bg-white rounded-xl p-6 shadow-soft">
            <h3 class="text-lg font-bold text-primary mb-3 flex items-center gap-2">
              <svg class="w-5 h-5 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              Prix élagage Tours — Tarifs transparents
            </h3>
            <p class="mb-3">
              Le <strong>prix d'un élagage à Tours</strong> varie selon la hauteur, l'essence et l'accessibilité. <strong>Tarifs indicatifs 2025 :</strong>
            </p>
            <ul class="space-y-1 text-xs mb-3">
              <li>→ Arbre 5-10m : <strong>200-400€</strong></li>
              <li>→ Arbre 10-15m : <strong>400-800€</strong></li>
              <li>→ Arbre +15m : <strong>sur devis</strong></li>
            </ul>
            <p class="text-xs">
              <strong class="text-secondary">Crédit d'impôt -50%</strong> jusqu'à 2 500€ sur vos travaux. Paiement en plusieurs fois possible.
            </p>
          </div>

          <div class="bg-white rounded-xl p-6 shadow-soft">
            <h3 class="text-lg font-bold text-primary mb-3 flex items-center gap-2">
              <svg class="w-5 h-5 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
              </svg>
              Élagage d'urgence Tours — 7j/7
            </h3>
            <p class="mb-3">
              Arbre dangereux après une tempête ? Branches qui menacent votre toiture ?
              Notre service d'<strong>élagage d'urgence à Tours</strong> intervient <strong>7 jours sur 7</strong>.
            </p>
            <p>
              Appelez le <a href={getPhoneLink()} class="text-accent font-bold hover:underline">{siteConfig.business.phoneDisplay}</a> pour une
              <strong>intervention sous 2h</strong> en cas d'urgence avérée.
            </p>
          </div>

          <div class="bg-white rounded-xl p-6 shadow-soft">
            <h3 class="text-lg font-bold text-primary mb-3 flex items-center gap-2">
              <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
              </svg>
              Toutes nos prestations à Tours
            </h3>
            <ul class="space-y-1.5 text-xs">
              <li>✓ <strong>Élagage arbres ornementaux</strong> (chênes, platanes, tilleuls)</li>
              <li>✓ <strong>Taille arbres fruitiers</strong> (pommiers, poiriers, cerisiers)</li>
              <li>✓ <strong>Abattage arbres dangereux</strong> avec démontage</li>
              <li>✓ <strong>Dessouchage</strong> par rogneuse professionnelle</li>
              <li>✓ <strong>Taille haies</strong> toutes hauteurs</li>
              <li>✓ <strong>Élagage après tempête</strong> et mise en sécurité</li>
              <li>✓ <strong>Diagnostic phytosanitaire</strong></li>
              <li>✓ <strong>Évacuation déchets verts</strong> en déchetterie</li>
            </ul>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- ============================================ -->
  <!-- 10. FAQ (Featured Snippets Google)           -->
  <!-- ============================================ -->
  <section class="py-16 md:py-20 bg-white">
    <div class="container-custom">
      <div class="max-w-3xl mx-auto">
        <div class="text-center mb-10 animate-on-scroll">
          <span class="inline-block px-4 py-1.5 bg-accent/10 text-accent font-semibold rounded-full text-sm uppercase tracking-wider mb-4">
            Vos questions
          </span>
          <h2 class="text-3xl md:text-4xl font-display font-bold text-primary">
            Questions fréquentes — Élagage Tours
          </h2>
        </div>

        <div class="space-y-4 animate-on-scroll">
          {siteConfig.faq.map((item, index) => (
            <details class="group bg-neutral-cream rounded-xl border border-neutral-200 hover:border-accent/30 transition-colors overflow-hidden">
              <summary class="flex items-center justify-between p-5 cursor-pointer list-none font-bold text-primary hover:text-accent transition-colors">
                <span class="flex items-center gap-3 text-base md:text-lg">
                  <span class="flex-shrink-0 w-7 h-7 bg-accent/10 text-accent rounded-full flex items-center justify-center text-sm font-bold">
                    {index + 1}
                  </span>
                  {item.question}
                </span>
                <svg class="w-5 h-5 flex-shrink-0 text-accent transition-transform duration-300 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
              </summary>
              <div class="px-5 pb-5 text-neutral-gray text-sm md:text-base leading-relaxed border-t border-neutral-200">
                <div class="pt-4">{item.answer}</div>
              </div>
            </details>
          ))}
        </div>

        <div class="text-center mt-8 animate-on-scroll">
          <p class="text-neutral-gray mb-4">Une autre question ? Contactez-nous directement.</p>
          <a href={getPhoneLink()} class="inline-flex items-center gap-2 text-accent font-bold text-xl hover:text-primary transition-colors">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
            </svg>
            {siteConfig.business.phoneDisplay}
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================================ -->
  <!-- 11. CTA FINALE MASSIVE                       -->
  <!-- ============================================ -->
  <section class="relative py-20 md:py-28 overflow-hidden bg-gradient-to-br from-primary-900 to-primary">
    <div class="absolute inset-0 opacity-10">
      <img src="/images/hero/loire-hero.webp" alt="" class="w-full h-full object-cover" aria-hidden="true" loading="lazy"/>
    </div>
    <div class="absolute inset-0 bg-gradient-to-br from-primary-900/90 to-primary/90"></div>

    <div class="container-custom relative z-10 text-center text-white px-4">
      <div class="max-w-3xl mx-auto animate-on-scroll">
        <div class="flex justify-center text-yellow-400 text-2xl mb-4">★★★★★</div>
        <h2 class="text-2xl sm:text-3xl md:text-5xl font-display font-extrabold mb-3 md:mb-4">
          Besoin d'un élagueur à Tours ?
        </h2>
        <p class="text-sm sm:text-base md:text-xl text-white/80 mb-6 md:mb-8">
          Devis gratuit · Déplacement sans engagement · Intervention rapide &lt;48h
        </p>

        <!-- Phone CTA MASSIVE -->
        <div class="mb-4 md:mb-5 px-2">
          <a
            href={getPhoneLink()}
            class="flex items-center justify-center gap-3 sm:gap-4 bg-accent hover:bg-accent-hover text-white font-extrabold rounded-2xl shadow-2xl hover:shadow-glow transition-all duration-300 hover:scale-105 w-full sm:w-auto sm:inline-flex mx-auto"
            style="padding: clamp(1rem, 3vw, 1.75rem) clamp(1.5rem, 5vw, 3.5rem); font-size: clamp(1.3rem, 5vw, 2.25rem);"
          >
            <svg class="w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
            </svg>
            <span>{siteConfig.business.phoneDisplay}</span>
          </a>
          <p class="text-white/60 mt-2 text-xs sm:text-sm">Disponible 7j/7 — Appel gratuit</p>
        </div>

        <a
          href="/contact"
          class="inline-flex items-center justify-center gap-2 w-full sm:w-auto px-6 sm:px-8 py-3.5 sm:py-4 border-2 border-white text-white font-bold text-base sm:text-lg rounded-xl hover:bg-white hover:text-primary transition-all duration-300"
        >
          Devis en ligne gratuit
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
          </svg>
        </a>

        <p class="text-xs md:text-sm text-white/50 mt-6">
          Zone d'intervention : {siteConfig.serviceArea.radius}km autour de Tours (37) · Indre-et-Loire
        </p>
      </div>
    </div>
  </section>

</BaseLayout>
