---
/**
 * Page d'accueil principale
 * Site vitrine élagueur ultra-moderne avec SEO optimisé
 */
import BaseLayout from '@/layouts/BaseLayout.astro';
import HeroSection from '@/components/sections/HeroSection.astro';
import ServicesFlipSection from '@/components/sections/ServicesFlipSection.astro';
import CertificationsSection from '@/components/sections/CertificationsSection.astro';
import StatsCounter from '@/components/react/StatsCounter';
import ContactForm from '@/components/react/ContactForm';
import { siteConfig } from '@/data/siteConfig';
import {
  getLocalBusinessSchema,
  getFAQSchema,
  getWebSiteSchema,
  combineSchemas,
} from '@/utils/schemas';

// Schémas JSON-LD pour SEO
const schemas = combineSchemas(
  getLocalBusinessSchema(),
  getWebSiteSchema(),
  getFAQSchema()
);

// Stats pour la section chiffres clés
const stats = [
  {
    value: siteConfig.stats.treesPerYear,
    label: 'arbres élagués/an',
    suffix: '+',
  },
  {
    value: siteConfig.stats.yearsExperience,
    label: "ans d'expérience",
  },
  {
    value: siteConfig.stats.satisfactionRate,
    label: 'clients satisfaits',
    suffix: '%',
  },
  {
    value: siteConfig.stats.responseTime,
    label: 'délai intervention',
    prefix: '< ',
  },
];
---

<BaseLayout
  title={siteConfig.seo.title}
  description={siteConfig.seo.description}
  keywords={siteConfig.seo.keywords}
  schema={schemas}
>
  <!-- Hero Section Fullscreen -->
  <HeroSection />

  <!-- Section Formulaire Contact (PRIORITÉ - juste après hero) -->
  <section id="contact" class="py-20 bg-gradient-to-br from-neutral-cream to-white">
    <div class="container-custom">
      <div class="max-w-4xl mx-auto">
        <div class="text-center mb-12 animate-on-scroll">
          <span class="inline-block px-4 py-2 bg-accent/10 text-accent font-semibold rounded-full text-sm uppercase tracking-wider mb-4">
            Demande de devis
          </span>
          <h2 class="text-display-2 font-display font-bold text-primary mb-4">
            Demandez votre devis gratuit
          </h2>
          <p class="text-xl text-neutral-gray">
            Réponse sous 24h • Déplacement gratuit • Devis sans engagement
          </p>
        </div>

        <div class="bg-white rounded-2xl shadow-lift p-8 md:p-12">
          <ContactForm client:visible />
        </div>
      </div>
    </div>
  </section>

  <!-- Section Intro SEO (élagueur près de chez moi Tours) -->
  <section class="py-20 bg-white">
    <div class="container-custom">
      <div class="max-w-5xl mx-auto animate-on-scroll">
        <div class="text-center mb-12">
          <span class="inline-block px-4 py-2 bg-accent/10 text-accent font-semibold rounded-full text-sm uppercase tracking-wider mb-4">
            Votre élagueur local
          </span>
          <h2 class="text-display-2 font-display font-bold text-primary mb-6">
            Besoin d'un élagueur près de chez vous à Tours ?
          </h2>
        </div>

        <div class="prose prose-lg max-w-none space-y-6 text-neutral-gray leading-relaxed text-responsive">
          <p class="text-xl">
            Vous cherchez un <strong class="whitespace-nowrap">élagueur&nbsp;près&nbsp;de&nbsp;chez&nbsp;moi à&nbsp;Tours</strong> pour l'entretien de vos arbres ?
            <strong>{siteConfig.business.name}</strong> intervient rapidement dans toute l'<strong class="whitespace-nowrap">Indre-et-Loire&nbsp;(37)</strong>
            pour tous vos travaux d'<strong>élagage,&nbsp;abattage et&nbsp;taille&nbsp;de&nbsp;haies</strong>.
          </p>

          <p>
            Basés à <strong>Tours</strong>, nous sommes votre <strong>élagueur&nbsp;professionnel de&nbsp;proximité</strong> pour
            toutes les communes du département : <a href="/zones/tours" class="text-primary hover:text-accent underline whitespace-nowrap">Tours</a>, <a href="/zones/amboise" class="text-primary hover:text-accent underline whitespace-nowrap">Amboise</a>, <a href="/zones/joue-les-tours" class="text-primary hover:text-accent underline whitespace-nowrap">Joué-lès-Tours</a>, {siteConfig.serviceArea.cities.slice(3, 8).join(', ')}, et <a href="/zones" class="text-primary hover:text-accent underline">bien&nbsp;d'autres&nbsp;villes</a>.
            Notre entreprise familiale compte <strong>plus&nbsp;de&nbsp;{siteConfig.stats.yearsExperience}&nbsp;ans&nbsp;d'expérience</strong>
            dans l'élagage et l'entretien d'espaces&nbsp;verts.
          </p>

          <div class="grid md:grid-cols-2 gap-6 my-8">
            <div class="bg-gradient-to-br from-primary/5 to-accent/5 rounded-xl p-6 border border-primary/10">
              <h3 class="text-xl font-bold text-primary mb-3 flex items-center gap-3">
                <svg class="w-6 h-6 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                Pourquoi choisir un élagueur local ?
              </h3>
              <ul class="space-y-2 text-sm">
                <li class="flex items-start gap-2">
                  <span class="text-accent font-bold">→</span>
                  <span>Intervention rapide sous 48h maximum</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="text-accent font-bold">→</span>
                  <span>Connaissance des essences locales d'Indre-et-Loire</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="text-accent font-bold">→</span>
                  <span>Déplacement gratuit pour établir votre devis</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="text-accent font-bold">→</span>
                  <span>Disponibilité et proximité garanties</span>
                </li>
              </ul>
            </div>

            <div class="bg-gradient-to-br from-secondary/5 to-accent/5 rounded-xl p-6 border border-secondary/20">
              <h3 class="text-xl font-bold text-primary mb-3 flex items-center gap-3">
                <svg class="w-6 h-6 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                Réduction fiscale jusqu'à 2 500€
              </h3>
              <p class="text-sm mb-3">
                Profitez de <strong>50% de crédit d'impôt</strong> sur vos travaux d'élagage et d'entretien de jardin
                (limite de 5 000€ de dépenses par an pour les particuliers).
              </p>
              <p class="text-xs text-neutral-gray/80">
                ✅ Attestation fiscale fournie • ✅ Paiement facilité en plusieurs fois disponible
              </p>
            </div>
          </div>

          <p>
            En tant qu'<strong>élagueur certifié à Tours</strong>, nous respectons toutes les normes de sécurité
            et disposons d'une <strong>assurance RC Professionnelle de 8 millions d'euros</strong>. Chaque chantier
            est réalisé par des <strong>élagueurs grimpeurs professionnels</strong> équipés de matériel récent et conforme.
          </p>

          <p>
            Nous intervenons pour tous types de travaux : <a href="/#services" class="text-primary hover:text-accent underline">élagage d'arbres d'ombrage</a>,
            <strong>taille d'arbres fruitiers</strong>, <strong>abattage d'arbres dangereux</strong>,
            <a href="/services/dessouchage-arbres" class="text-primary hover:text-accent underline">dessouchage professionnel</a>, <strong>taille de haies</strong> et <strong>entretien d'espaces verts</strong>.
            Que vous soyez particulier ou professionnel (syndics, mairies, entreprises), nous adaptons nos prestations
            à vos besoins spécifiques.
          </p>
        </div>

        <div class="text-center mt-12">
          <a href="#contact" class="btn-primary inline-flex text-lg">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
            </svg>
            <span>Demander mon devis gratuit</span>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Services Section -->
  <!-- Section Services avec FlipCards 3D -->
  <ServicesFlipSection />

  <!-- Section Pourquoi nous choisir (Split screen) -->
  <section class="section-spacing bg-primary text-white relative overflow-hidden">
    <!-- Background decorative element -->
    <div class="absolute bottom-0 left-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl" aria-hidden="true"></div>

    <div class="container-custom relative z-10">
      <div class="grid lg:grid-cols-2 gap-12 lg:gap-16 items-center">
        <!-- Texte (gauche) -->
        <div class="space-y-8 animate-on-scroll">
          <span class="inline-block px-4 py-2 bg-accent/20 text-accent font-semibold rounded-full text-sm uppercase tracking-wider">
            Pourquoi nous choisir
          </span>

          <h2 class="text-display-2 font-display font-bold">
            Votre élagueur de confiance en {siteConfig.serviceArea.department}
          </h2>

          <p class="text-xl text-white/80 leading-relaxed">
            Avec des clients particuliers et professionnels qui se comptent par centaines, PAYSAGISTE TOURAINE 37 est considéré comme l'un des plus sérieux de la région de Tours. Dans cette entreprise familiale, nous sommes totalement dévoués à notre métier.
          </p>

          <p class="text-xl text-white/80 leading-relaxed">
            Notre entreprise a été fondée il y a 10 ans, et nous sommes fiers de proposer des services de haute qualité à des prix abordables. Notre plus grand plaisir est la satisfaction de nos clients.
          </p>

          <!-- Points clés avec icônes -->
          <div class="space-y-6 pt-4">
            {[
              {
                title: 'Élagueur grimpeur certifié',
                description: 'Plus de 13 années d\'expérience dans les travaux d\'élagage et d\'abattage en hauteur.',
              },
              {
                title: `${siteConfig.stats.yearsExperience} ans d'expérience`,
                description: 'Centaines de clients particuliers et professionnels satisfaits dans la région de Tours.',
              },
              {
                title: 'Entreprise familiale',
                description: 'Totalement dévoués à notre métier, nous proposons des services de haute qualité à prix abordables.',
              },
              {
                title: `Intervention rapide (${siteConfig.stats.responseTime})`,
                description: 'Disponibilité maximale pour répondre à vos urgences.',
              },
            ].map((point) => (
              <div class="flex gap-4 group">
                <div class="flex-shrink-0 w-12 h-12 bg-accent/20 rounded-lg flex items-center justify-center group-hover:bg-accent transition-colors duration-300">
                  <svg class="w-6 h-6 text-accent group-hover:text-white transition-colors duration-300" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                </div>
                <div>
                  <h3 class="text-xl font-bold mb-2">{point.title}</h3>
                  <p class="text-white/70">{point.description}</p>
                </div>
              </div>
            ))}
          </div>

          <!-- CTA -->
          <div class="pt-6">
            <a href="/contact" class="btn-primary inline-flex">
              <span>Demander un devis</span>
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
              </svg>
            </a>
          </div>
        </div>

        <!-- Image (droite) avec effet parallax -->
        <div class="relative animate-on-scroll">
          <div class="relative rounded-2xl overflow-hidden shadow-lift">
            <!-- Placeholder image - à remplacer par vraie photo -->
            <div class="aspect-[4/3] bg-gradient-to-br from-accent/20 to-primary-600 flex items-center justify-center">
              <svg class="w-32 h-32 text-white/30" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
              </svg>
            </div>

            <!-- Overlay avec badges certifications -->
            <div class="absolute bottom-6 left-6 right-6 bg-white/95 backdrop-blur-sm rounded-xl p-6 shadow-lg">
              <div class="flex items-center gap-4">
                <div class="w-16 h-16 bg-accent rounded-full flex items-center justify-center flex-shrink-0">
                  <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                </div>
                <div>
                  <div class="font-bold text-primary mb-1">Entreprise certifiée</div>
                  <div class="text-sm text-neutral-gray">Assurance décennale • Élagueurs professionnels</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section Certifications & Garanties -->
  <CertificationsSection />

  <!-- Section Chiffres clés avec animations counter -->
  <section class="section-spacing bg-gradient-to-br from-primary-800 to-primary text-white">
    <div class="container-custom">
      <div class="text-center max-w-3xl mx-auto mb-16 animate-on-scroll">
        <h2 class="text-display-2 font-display font-bold mb-6">
          Des résultats qui parlent d'eux-mêmes
        </h2>
        <p class="text-xl text-white/80">
          Notre expertise reconnue dans toute la région {siteConfig.serviceArea.department}.
        </p>
      </div>

      <StatsCounter client:visible stats={stats} />
    </div>
  </section>

  <!-- Section CTA Finale avec parallax -->
  <section class="relative py-32 overflow-hidden bg-gradient-to-br from-primary-900 to-primary">
    <!-- Image de fond parallax - Décommentez quand l'image cta-bg.jpg est ajoutée -->
    <!--
    <div class="absolute inset-0 -z-10">
      <div
        class="w-full h-full bg-cover bg-center bg-fixed"
        style="background-image: linear-gradient(rgba(10, 46, 28, 0.85), rgba(10, 46, 28, 0.85)), url('/images/cta-bg.jpg');"
      >
      </div>
    </div>
    -->

    <div class="container-custom relative z-10 text-center text-white">
      <div class="max-w-4xl mx-auto space-y-8 animate-on-scroll">
        <h2 class="text-display-2 font-display font-bold">
          Besoin d'un élagueur professionnel ?
        </h2>
        <p class="text-2xl text-white/90">
          Devis gratuit sous 24h • Intervention rapide • Travail soigné
        </p>

        <!-- CTA Buttons -->
        <div class="flex flex-col sm:flex-row items-center justify-center gap-6 pt-8">
          <a href={`tel:${siteConfig.business.phone}`} class="btn-primary inline-flex text-lg px-10 py-6">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
            </svg>
            <span>Appeler maintenant</span>
          </a>

          <a href="/contact" class="inline-flex items-center gap-3 px-10 py-6 border-2 border-white text-white font-bold text-lg rounded-xl transition-all duration-300 hover:bg-white hover:text-primary hover:scale-105">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
            </svg>
            <span>Devis en ligne</span>
          </a>
        </div>

        <!-- Info supplémentaire -->
        <p class="text-white/70 pt-6">
          Disponible du lundi au samedi • Zone d'intervention : {siteConfig.serviceArea.radius} km autour de {siteConfig.serviceArea.mainCity}
        </p>
      </div>
    </div>
  </section>
</BaseLayout>
